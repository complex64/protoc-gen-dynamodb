package gen

import (
	"flag"

	"google.golang.org/protobuf/compiler/protogen"
)

type fileContext struct {
	// flags from the command line
	flags flag.FlagSet
	// protoc plugin handle
	plugin *protogen.Plugin
	// the proto input file
	in *protogen.File
	// output file we generate
	out *protogen.GeneratedFile
}

func (f *fileContext) generate() {
	f.writeCommentHeader()
	f.writePackage()
}

func (f *fileContext) writeCommentHeader() {
	f.out.P("// Code generated by protoc-gen-dynamodb. DO NOT EDIT.")
	f.out.P("// https://github.com/complex64/protoc-gen-dynamodb")
}

func (f *fileContext) writePackage() {
	f.out.P("package ", f.in.GoPackageName)
}
